<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
<title>é‡‘è‡³å°Šï½œé—¨åº—é”€å”®é€»è¾‘æµ‹è¯• 3DG</title>
<link rel="preconnect" href="https://www.3dg-group.com" crossorigin>
<style>
  :root{
    --bg:#fffdf7; --bg2:#fff7e8; --text:#222; --muted:#5e6266;
    --brand:#7c4f1d; --gold:#d6b55b; --gold-soft:#fff1c6; --line:#eadfbc;
    --ok:#18a957; --bad:#e64646; --radius:16px; --shadow:0 10px 22px rgba(140,110,40,.15);
    --fz-title:18px; --fz-option:16px; --fz-body:15px; --fz-small:13px;
  }
  @media (min-width:480px){
    :root{ --fz-title:20px; --fz-option:17px; --fz-body:16px; --fz-small:14px; }
  }
  *{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
  html,body{height:100%}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,Helvetica,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
    color:var(--text);
    background:
      radial-gradient(1200px 600px at 100% -100px, #ffe7b3 0%, transparent 60%),
      radial-gradient(1000px 500px at -200px 100%, #fff3cc 0%, transparent 55%),
      var(--bg);
  }
  .wrap{max-width:820px;margin:0 auto;padding:18px env(safe-area-inset-right) calc(18px + env(safe-area-inset-bottom)) env(safe-area-inset-left)}
  .card{
    background:linear-gradient(180deg,#fffef9 0%, var(--bg2) 100%);
    border:1px solid var(--line);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:18px;
  }
  header{display:flex;align-items:center;gap:12px;margin-bottom:8px}
  header img{height:36px}
  header h1{font-size:20px;margin:0;color:var(--brand)}
  p{margin:8px 0;font-size:var(--fz-body);color:var(--muted)}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  input[type="text"]{width:100%;padding:14px 16px;border-radius:12px;border:1px solid var(--line);background:#fff;color:var(--text);font-size:16px}
  .seg{display:flex;background:#fff;border:1px solid var(--line);border-radius:999px;padding:4px;gap:4px}
  .seg button{flex:1;border:0;border-radius:999px;padding:10px 12px;background:transparent;color:var(--brand);font-weight:700}
  .seg button.active{background:var(--gold-soft);color:#7a501f}
  .btn{width:100%;padding:14px 16px;border-radius:12px;border:1px solid var(--line);background:linear-gradient(#e7c879,#d4b159);color:#3a2a12;font-weight:800;font-size:16px}
  .btn:active{transform:translateY(1px)}
  .btn.alt{background:linear-gradient(#ffffff,#fff5db)}
  .btn.link{background:#fff;border-style:dashed}
  .btn.pass{background:linear-gradient(#2ad07a,#18a957);color:#fff;border-color:#18a957}
  .btn.danger{background:linear-gradient(#ffb1a8,#ff8b7d);color:#5a0e0e;border-color:#ff8b7d}
  .kpi{display:flex;gap:8px;flex-wrap:wrap}
  .pill{padding:8px 12px;border:1px solid var(--line);border-radius:999px;background:#fff; color:#6b4a1b;font-weight:700;font-size:var(--fz-small)}
  .progress{height:10px;background:#fff;border:1px solid var(--line);border-radius:999px;overflow:hidden}
  .progress>div{height:100%;background:linear-gradient(90deg,#ffd98a,#d6b55b);width:0%}
  .q-title{font-size:var(--fz-title);margin:6px 0 4px;color:#2a1b06}
  .q-sub{font-size:var(--fz-title);margin:0 0 12px;color:#2a1b06}
  .opt{display:flex;align-items:center;gap:10px;padding:12px;border:1px solid var(--line);border-radius:12px;background:#fff}
  .opt input{width:22px;height:22px}
  .opt-label{flex:1;font-size:var(--fz-option);line-height:1.35}
  .grid{display:grid;gap:10px}
  .nav{display:flex;gap:10px;margin-top:12px}
  .ttsbar{display:flex;gap:10px;margin-top:8px}
  table{width:100%;border-collapse:separate;border-spacing:0;margin-top:10px;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff}
  th,td{padding:10px;border-bottom:1px solid var(--line);vertical-align:top;font-size:var(--fz-body)}
  th{background:#fff8e4;color:#6b4a1b;text-align:left}
  tr:last-child td{border-bottom:0}
  .ok{color:var(--ok);font-weight:700}
  .bad{color:var(--bad);font-weight:700}
  .tag{display:inline-block;border:1px solid #c3e9d5;background:#eefcf5;color:#0d7b45;padding:2px 8px;border-radius:999px;font-size:var(--fz-small)}
  .topbar{position:sticky;top:0;z-index:10;background:linear-gradient(180deg,#fffdf2 0%, rgba(255,251,235,.85) 100%);padding:8px 0 12px;margin:-8px 0 12px;backdrop-filter: blur(6px)}
  .hint{font-size:var(--fz-small);color:#7a7a7a}
  .video-wrap{position:relative;width:100%;aspect-ratio:16/9;border:1px solid var(--line);border-radius:12px;overflow:hidden;background:#fff}
  .video-wrap iframe{position:absolute;inset:0;width:100%;height:100%;border:0}
</style>
</head>
<body>
  <div class="wrap">

    <!-- Screen 0: è§†é¢‘å¯¼å…¥é¡µ -->
    <div id="screen-video" class="card">
      <header>
        <img src="https://www.3dg-group.com/images/Navi_logo.png" alt="3DG é‡‘è‡³å°Š">
        <h1>é‡‘è‡³å°Šï½œé”€å”®æµç¨‹åŸ¹è®­è§†é¢‘<br><span style="font-size:14px;color:#8a5b27">Training Video (Optional)</span></h1>
      </header>
      <p>å»ºè®®å…ˆè§‚çœ‹åŸ¹è®­è§†é¢‘ï¼Œäº†è§£æœ¬æ¬¡æµ‹è¯•æ¶‰åŠçš„æ ¸å¿ƒæµç¨‹è¦ç‚¹ã€‚å¯éšæ—¶æ’­æ”¾/æš‚åœï¼›è‹¥æš‚æ—¶ä¸çœ‹ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€é¡µå¼€å§‹æµ‹è¯•ã€‚</p>
      <div class="video-wrap" aria-label="Training Video">
        <!-- ä½¿ç”¨ /previewï¼ŒåŸç”Ÿæ’­æ”¾/æš‚åœæ§ä»¶ -->
        <iframe src="https://drive.google.com/file/d/1Zrs_kZmK9N0RkrVMoEIuOlWm226JdqWM/preview" allow="autoplay; fullscreen" allowfullscreen></iframe>
      </div>
      <div class="nav">
        <button class="btn" id="btnGoStart">ä¸‹ä¸€é¡µ Â· å¼€å§‹æµ‹è¯• / Next</button>
      </div>
    </div>

    <!-- Screen 1: å¡«å§“åä¸éš¾åº¦ -->
    <div id="screen-start" class="card" style="display:none">
      <header>
        <img src="https://www.3dg-group.com/images/Navi_logo.png" alt="3DG é‡‘è‡³å°Š">
        <h1>é‡‘è‡³å°Šï½œé—¨åº—é”€å”®é€»è¾‘æµ‹è¯•<br><span style="font-size:14px;color:#8a5b27">Store Sales Logic Quiz</span></h1>
      </header>
      <p>å¡«å†™å§“åå¹¶é€‰æ‹©éš¾åº¦ã€‚</p>
      <div class="row">
        <input id="nameInput" type="text" placeholder="å§“å / Name" autocomplete="name" />
      </div>
      <div style="height:10px"></div>
      <h2 style="margin:0 0 6px;color:#7a501f;font-size:17px">éš¾åº¦ / Level</h2>
      <div class="seg" role="tablist" aria-label="Level">
        <button type="button" class="active" data-level="entry">Entry Â· 5é¢˜</button>
        <button type="button" data-level="normal">Normal Â· 10é¢˜</button>
        <button type="button" data-level="hard">Hard Â· 20é¢˜</button>
      </div>
      <div style="height:12px"></div>
      <button id="startBtn" class="btn">å¼€å§‹è€ƒè¯• / Start Quiz</button>
      <p class="hint">é€šè¿‡æ ‡å‡†ï¼šæ­£ç¡®ç‡ â‰¥ 80% å³é€šè¿‡ã€‚</p>
    </div>

    <!-- Screen 2: ç­”é¢˜ -->
    <div id="screen-quiz" class="card" style="display:none">
      <div class="topbar">
        <div class="kpi">
          <div class="pill" id="pillName">å§“åï¼š</div>
          <div class="pill" id="pillLevel">éš¾åº¦ï¼š</div>
          <div class="pill" id="pillCount">é¢˜ç›®ï¼š0/0</div>
        </div>
        <div style="height:8px"></div>
        <div class="progress"><div id="progressBar"></div></div>
      </div>

      <div id="qBox">
        <div class="q-title" id="qTitle">é¢˜å¹²ï¼ˆä¸­æ–‡ï¼‰</div>
        <div class="q-sub" id="qSub">Question (English)</div>
        <div id="optBox" class="grid"></div>

        <div class="ttsbar">
          <button class="btn alt" id="btnRead">æœ—è¯»å½“å‰é¢˜ / Read</button>
          <button class="btn link" id="btnStop">åœæ­¢æœ—è¯» / Stop</button>
        </div>
        <p class="hint">æœ—è¯»ä¾æ¬¡æ’­æ”¾ä¸­æ–‡é¢˜å¹²â†’è‹±æ–‡é¢˜å¹²â†’A-D é€‰é¡¹ï¼ˆä¸­è‹±ï¼‰ã€‚å¯éšæ—¶å¼€å§‹æˆ–åœæ­¢ã€‚</p>
      </div>

      <div class="nav">
        <button class="btn alt" id="prevBtn">ä¸Šä¸€é¢˜ / Prev</button>
        <button class="btn" id="nextBtn" disabled>ä¸‹ä¸€é¢˜ / Next</button>
      </div>
    </div>

    <!-- Screen 3: æˆç»© -->
    <div id="screen-result" class="card" style="display:none">
      <header style="margin-bottom:4px">
        <img src="https://www.3dg-group.com/images/Navi_logo.png" alt="3DG é‡‘è‡³å°Š">
        <h1>æˆç»© / Result</h1>
      </header>
      <div class="row">
        <div class="pill" id="rName"></div>
        <div class="pill" id="rLevel"></div>
        <div class="pill" id="rScore"></div>
        <div class="pill" id="rPass"></div>
      </div>
      <p id="passNote" style="margin-top:8px;"></p>

      <h2 style="color:#7a501f;font-size:18px">ç­”é¢˜æ˜ç»† / Answer Review</h2>
      <table id="resultTable">
        <thead>
          <tr>
            <th>#</th>
            <th>é¢˜ç›®ï¼ˆä¸­/è‹±ï¼‰</th>
            <th>ä½ çš„ç­”æ¡ˆ<br/>Your Answer</th>
            <th>æ­£ç¡®ç­”æ¡ˆ<br/>Correct</th>
            <th>è§£æï¼ˆä¸­/è‹±ï¼‰<br/>Explanation</th>
            <th>ç»“æœ<br/>Result</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <div class="nav">
        <button class="btn link" id="copyKey">å¤åˆ¶å­¦ä¹ ç‰ˆç­”æ¡ˆ / Copy Study Key</button>
        <button class="btn link" id="againSame">å†æµ‹ä¸€æ¬¡ï¼ˆåŒéš¾åº¦ï¼‰/ Retake Same Level</button>
        <button class="btn pass" id="againStart">è¿”å›å¼€å§‹ / Back to Start</button>
      </div>
    </div>
  </div>

<script>
/* ===== å°å·¥å…· ===== */
const $ = s=>document.querySelector(s);
const el = (tag, attrs={}, children=[])=>{
  const node = document.createElement(tag);
  Object.entries(attrs).forEach(([k,v])=>{
    if(k==='class') node.className=v;
    else if(k==='html') node.innerHTML=v;
    else node.setAttribute(k,v);
  });
  children.forEach(c=> node.appendChild(c));
  return node;
};
const shuffle = (arr)=>{
  const a = arr.slice();
  for(let i=a.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [a[i],a[j]]=[a[j],a[i]];
  }
  return a;
};

/* ===== é¢˜åº“ï¼ˆ20é¢˜ï¼Œæ­£ç¡®é¡¹å›ºå®šï¼›é¢˜åºä¸é€‰é¡¹æ¯æ¬¡éšæœºï¼‰ ===== */
const BANK_ALL = [
  { zh:"ä¸ºä»€ä¹ˆä¸èƒ½åœ¨å®¢æˆ·åˆšè¿›åº—æ—¶å°±ç›´æ¥è¿›å…¥æˆäº¤ç¯èŠ‚ï¼Ÿ",
    en:"Why should salespeople avoid jumping directly to the closing stage when customers enter the store?",
    options:[
      {zh:"å› ä¸ºè¿™æ ·æ˜¾å¾—ä¸ç¤¼è²Œ", en:"Because it seems impolite"},
      {zh:"å› ä¸ºå¤§å¤šæ•°å®¢æˆ·è¿›åº—æ²¡æœ‰æ˜ç¡®ç›®çš„ï¼Œéœ€è¦å…ˆå»ºç«‹é“¾æ¥", en:"Because most customers enter without a clear purpose and need connection first", correct:true},
      {zh:"å› ä¸ºè¿™æ ·ä¼šæµªè´¹æ—¶é—´", en:"Because it wastes time"},
      {zh:"å› ä¸ºå®¢æˆ·å–œæ¬¢å…ˆçœ‹æŠ˜æ‰£", en:"Because customers prefer discounts first"}
    ],
    exp_zh:"å¤šæ•°æ¥è®¿è€…å¤„äºæ¢ç´¢çŠ¶æ€ï¼Œéœ€å…ˆå»ºç«‹é“¾æ¥å’Œä¿¡ä»»ï¼Œå†è¿›å…¥éœ€æ±‚æŒ–æ˜ä¸æ¨è¿›ã€‚",
    exp_en:"Most entrants are browsing; build rapport and context before need discovery and closing."
  },
  { zh:"é”€å”®æµç¨‹ä¸­çš„ç¬¬ä¸€æ­¥é€»è¾‘åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ",
    en:"What should be the first logical step in the sales process?",
    options:[
      {zh:"ç›´æ¥ä»‹ç»çˆ†å“", en:"Directly introduce bestsellers"},
      {zh:"å»ºç«‹è”ç³»å¹¶è¿›å…¥ç ´å†°ç¯èŠ‚", en:"Build connection and start with ice-breaking", correct:true},
      {zh:"ç»™å®¢æˆ·è®²è§£ä»·æ ¼ä½“ç³»", en:"Explain pricing system"},
      {zh:"å¸¦å®¢æˆ·éšä¾¿é€›åº—", en:"Let the customer wander around"}
    ],
    exp_zh:"ç ´å†°æ˜¯æ‰¿ä¸Šå¯ä¸‹çš„è¡”æ¥ç‚¹ï¼Œé™ä½æˆ’å¤‡ã€å»ºç«‹ä¿¡ä»»ã€‚",
    exp_en:"Ice-breaking connects stages, reduces friction, and builds trust."
  },
  { zh:"å“ç‰Œå®£å¯¼åœ¨é”€å”®é€»è¾‘ä¸­èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿ",
    en:"What role does brand storytelling play in the sales logic?",
    options:[
      {zh:"ç”¨äºæ‰“å‘æ—¶é—´", en:"To kill time"},
      {zh:"å¢å¼ºå·®å¼‚åŒ–ï¼Œé¿å…å®¢æˆ·åªå…³æ³¨æ¯”ä»·", en:"Strengthen differentiation and prevent price-only comparison", correct:true},
      {zh:"è®©å®¢æˆ·ç«‹å³ä»˜æ¬¾", en:"To make customers pay immediately"},
      {zh:"æ›¿ä»£äº§å“ä»‹ç»", en:"To replace product introduction"}
    ],
    exp_zh:"å·®å¼‚åŒ–å™äº‹è®©å®¢æˆ·é‡‡ç”¨éä»·æ ¼æ ‡å‡†è¯„ä¼°ä½ ï¼Œä»è€Œé¿å…æ¯”ä»·é™·é˜±ã€‚",
    exp_en:"Differentiation reframes evaluation criteria beyond price and avoids price wars."
  },
  { zh:"å¦‚æœå®¢æˆ·è¯´â€œåªæ˜¯éšä¾¿çœ‹çœ‹â€ï¼Œé”€å”®åº”å¦‚ä½•é€»è¾‘æ¨è¿›ï¼Ÿ",
    en:"If a customer says â€œI am just browsing,â€ how should the salesperson logically proceed?",
    options:[
      {zh:"åœæ­¢æ¥å¾…", en:"Stop serving"},
      {zh:"å¼ºè¡Œæ¨é”€é»„é‡‘", en:"Push gold products directly"},
      {zh:"å¼•å¯¼å®¢æˆ·åˆ°æ–°å“æˆ–ç‰¹è‰²åŒºåŸŸ", en:"Guide the customer to new arrivals or special sections", correct:true},
      {zh:"é©¬ä¸Šç»™æŠ˜æ‰£", en:"Offer discounts immediately"}
    ],
    exp_zh:"ç”¨åœºæ™¯ä¸ä¸“åŒºå¼•å¯¼å…´è¶£ä¸æ³¨æ„åŠ›ï¼Œå†é€æ­¥æŒ–æ˜éœ€æ±‚ã€‚",
    exp_en:"Use curated areas to focus attention first, then discover needs."
  },
  { zh:"ä¸ºä»€ä¹ˆé—¨åº—éœ€è¦è®¾ç«‹â€œçˆ†å“åŒºâ€ï¼Ÿ",
    en:"Why should the store set up a â€œbestseller zoneâ€?",
    options:[
      {zh:"ä¸ºäº†æ¸…ç†åº“å­˜", en:"To clear old stock"},
      {zh:"è®©å®¢æˆ·å¿«é€Ÿèšç„¦ç•…é”€æ¬¾ï¼Œæé«˜è½¬åŒ–æ•ˆç‡", en:"To quickly focus customers on popular items and improve conversion", correct:true},
      {zh:"å› ä¸ºåº—é¢éœ€è¦è£…é¥°", en:"Because the store needs decoration"},
      {zh:"ä¸ºäº†å‡å°‘é”€å”®å‘˜ä»‹ç»äº§å“çš„å·¥ä½œé‡", en:"To reduce salespersonâ€™s workload"}
    ],
    exp_zh:"ç¼©çŸ­é€‰æ‹©è·¯å¾„ï¼Œé™ä½å†³ç­–æˆæœ¬ï¼Œå½¢æˆâ€œå…ˆæ˜“åéš¾â€çš„æ¨è¿›ã€‚",
    exp_en:"Shortens decision path and reduces cognitive load, improving conversion."
  },
  { zh:"åœ¨é”€å”®é€»è¾‘ä¸­ï¼Œâ€œç§è‰â€çš„æ ¸å¿ƒæ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ",
    en:"What is the core meaning of â€œseedingâ€ in sales logic?",
    options:[
      {zh:"å¼ºè°ƒå®¢æˆ·å¿…é¡»ä¹°", en:"Forcing the customer to buy"},
      {zh:"æ½œç§»é»˜åŒ–åœ°åˆ¶é€ å…´è¶£ï¼Œå¼•å¯¼å®¢æˆ·å½¢æˆéœ€æ±‚", en:"Subtly creating interest and guiding customers to form demand", correct:true},
      {zh:"ç”¨æ¥ä»£æ›¿å“ç‰Œå®£å¯¼", en:"To replace brand storytelling"},
      {zh:"åªåœ¨æ¸…ä»“æ´»åŠ¨æ—¶ä½¿ç”¨", en:"Only used during clearance sales"}
    ],
    exp_zh:"é€šè¿‡é‡å¤ä¸åœºæ™¯å±•ç¤ºæŒç»­æé†’ï¼Œä¿ƒæˆâ€œè‡ªæˆ‘å‘ç°â€çš„åå¥½å½¢æˆã€‚",
    exp_en:"Repeated cues and contexts help customers â€˜self-discoverâ€™ preferences."
  },
  { zh:"ä¸ºä»€ä¹ˆè¦é€æ­¥å¼•å¯¼å®¢æˆ·ï¼Œè€Œä¸æ˜¯è¢«åŠ¨è·Ÿéšå®¢æˆ·ï¼Ÿ",
    en:"Why should salespeople guide customers step by step instead of passively following them?",
    options:[
      {zh:"å› ä¸ºè¿™æ ·æ›´å¿«æˆäº¤", en:"Because it closes deals faster"},
      {zh:"å› ä¸ºå¯ä»¥æ§åˆ¶å®¢æˆ·ä½“éªŒå’ŒèŠ‚å¥", en:"Because it allows control of customer experience and pace", correct:true},
      {zh:"å› ä¸ºå®¢æˆ·å–œæ¬¢è¢«æ§åˆ¶", en:"Because customers like being controlled"},
      {zh:"å› ä¸ºè¿™æ ·èƒ½å‡å°‘ä»‹ç»äº§å“æ•°é‡", en:"Because it reduces product introduction workload"}
    ],
    exp_zh:"ä¸»åŠ¨è®¾è®¡è·¯å¾„ä¸èŠ‚å¥ï¼Œæå‡ä½“éªŒçš„è¿è´¯æ€§ä¸ä¸“ä¸šæ„Ÿã€‚",
    exp_en:"Proactive pacing creates a coherent, professional experience."
  },
  { zh:"ç»Ÿä¸€çš„è¯æœ¯â€œä½ å¥½ï¼Œæ¬¢è¿ï¼Œæƒ³çœ‹ç‚¹å•¥â€ä¸ºä»€ä¹ˆä¼šå¸¦æ¥é£é™©ï¼Ÿ",
    en:"Why is it risky if all salespeople use the same greeting â€œHello, welcome, what do you want to see?â€",
    options:[
      {zh:"å®¹æ˜“è®©å®¢æˆ·äº§ç”Ÿå®¡ç¾ç–²åŠ³", en:"It makes customers feel bored"},
      {zh:"å®¹æ˜“è®©å®¢æˆ·è¿›å…¥æ¯”ä»·æ¨¡å¼ï¼Œæ— æ³•çªå‡ºå·®å¼‚åŒ–", en:"It pushes customers into price comparison, losing differentiation", correct:true},
      {zh:"å› ä¸ºå®¢æˆ·å–œæ¬¢æ›´é•¿çš„é—®å€™", en:"Because customers prefer longer greetings"},
      {zh:"å› ä¸ºå®¢æˆ·ä¼šæ€€ç–‘äº§å“è´¨é‡", en:"Because customers may doubt product quality"}
    ],
    exp_zh:"ç¼ºå°‘å·®å¼‚åŒ–ï¼Œå®¢æˆ·é»˜è®¤ä½ ä¸ä»–åº—åŒè´¨ï¼Œä»è€Œè¿›å…¥æ¯”ä»·æ¡†æ¶ã€‚",
    exp_en:"Lack of differentiation frames you as generic, triggering price-only comparison."
  },
  { zh:"åœ¨é”€å”®é€»è¾‘ä¸­ï¼Œä»€ä¹ˆæ—¶å€™æå‡ºäº§å“é€‰æ‹©é—®é¢˜æœ€åˆé€‚ï¼Ÿ",
    en:"When is the best timing to ask the customer about specific product choices?",
    options:[
      {zh:"ä¸€è¿›åº—å°±ç«‹åˆ»è¯¢é—®", en:"Immediately when they enter"},
      {zh:"åœ¨å“ç‰Œå®£å¯¼ä¹‹åï¼Œå¼•å¯¼åˆ°çˆ†å“åŒºæ—¶", en:"After brand introduction, when guiding to the bestseller zone", correct:true},
      {zh:"åœ¨å®¢æˆ·å‡†å¤‡ç¦»åº—æ—¶", en:"When the customer is about to leave"},
      {zh:"åœ¨å®¢æˆ·çœ‹å®Œæ‰€æœ‰æŸœå°ä¹‹å", en:"After the customer has browsed all counters"}
    ],
    exp_zh:"å…ˆå»ºç«‹æ¡†æ¶ä¸ä¿¡ä»»ï¼Œå†åœ¨èšç„¦åœºåŸŸå†…ç¼©å°é€‰æ‹©ã€‚",
    exp_en:"Build frame and trust first; narrow choices within a focused area."
  },
  { zh:"ä¸ºä»€ä¹ˆé”€å”®æµç¨‹å¿…é¡»åŒ…å«â€œé€»è¾‘è¡”æ¥â€ç¯èŠ‚ï¼Ÿ",
    en:"Why must the sales process include logical transition steps?",
    options:[
      {zh:"å› ä¸ºè¿™æ ·å¯ä»¥å¢åŠ å¯¹è¯é•¿åº¦", en:"Because it makes conversations longer"},
      {zh:"å› ä¸ºå®¢æˆ·éœ€è¦è¢«ä¸€æ­¥æ­¥å¼•å¯¼æ‰èƒ½å½¢æˆè´­ä¹°æ„æ„¿", en:"Because customers need step-by-step guidance to develop buying intent", correct:true},
      {zh:"å› ä¸ºé—¨åº—è§„å®š", en:"Because it is a store rule"},
      {zh:"å› ä¸ºé”€å”®å‘˜è®°ä¸ä½å¤ªå¤šå°è¯", en:"Because salespeople cannot memorize too many lines"}
    ],
    exp_zh:"è¡”æ¥è®©ä¿¡æ¯ä¸ä½“éªŒè¿è´¯ï¼Œé€å±‚æ¨è¿›æ„æ„¿å½¢æˆä¸æ‰¿è¯ºã€‚",
    exp_en:"Transitions ensure coherence, progressively building intent and commitment."
  },
  /* ç»†èŠ‚ç¯‡ */
  { zh:"åœ¨å®¢æˆ·è¿›åº—åï¼Œä¸ºä»€ä¹ˆç ´å†°ç¯èŠ‚è‡³å…³é‡è¦ï¼Ÿ",
    en:"Why is the ice-breaking stage critical after a customer enters the store?",
    options:[
      {zh:"å› ä¸ºå¯ä»¥ç«‹å³æ¨é”€äº§å“", en:"Because it allows immediate product selling"},
      {zh:"å› ä¸ºå®ƒèƒ½æ‰“ç ´æ²‰é»˜å¹¶å»ºç«‹ä¿¡ä»»æ„Ÿ", en:"Because it breaks the silence and builds trust", correct:true},
      {zh:"å› ä¸ºå®¢æˆ·ä¼šä¸»åŠ¨æéœ€æ±‚", en:"Because customers will state their needs directly"},
      {zh:"å› ä¸ºèƒ½å‡å°‘ä»‹ç»äº§å“æ—¶é—´", en:"Because it reduces product introduction time"}
    ],
    exp_zh:"é™ä½ç¤¾äº¤é˜»æŠ—ï¼Œå»ºç«‹æƒ…ç»ªå®‰å…¨ï¼Œæ‰ä¾¿äºä¿¡æ¯äº¤æ¢ã€‚",
    exp_en:"Reduces social friction and builds safety for meaningful exchange."
  },
  { zh:"å“ç‰Œå®£å¯¼ä¸­æåˆ°â€œå†å²å’Œä¼ æ‰¿â€çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ",
    en:"What is the role of highlighting â€œhistory and heritageâ€ in brand storytelling?",
    options:[
      {zh:"è¯æ˜ä»·æ ¼åˆç†", en:"To justify the pricing"},
      {zh:"å»ºç«‹ä¸“ä¸šæ„Ÿå’Œå¯é åº¦", en:"To establish professionalism and reliability", correct:true},
      {zh:"å¡«è¡¥å¯¹è¯ç©ºç™½", en:"To fill silence in conversation"},
      {zh:"æ›¿ä»£å”®åæœåŠ¡", en:"To replace after-sales service"}
    ],
    exp_zh:"ç¨³å®šé¢„æœŸä¸ä¿¡ä»»åŸºçº¿ï¼Œå¼ºåŒ–å¯é æ€§ä¸é€‰æ‹©ç†ç”±ã€‚",
    exp_en:"Sets trust baselines and strengthens reasons to choose you."
  },
  { zh:"ä¸ºä»€ä¹ˆåœ¨ä»‹ç»çˆ†å“åŒºæ—¶è¦ä½¿ç”¨â€œTOP 10æ¦œå•â€çš„è¡¨è¾¾æ–¹å¼ï¼Ÿ",
    en:"Why should salespeople present the bestseller zone using a â€œTOP 10 rankingâ€ format?",
    options:[
      {zh:"å› ä¸ºå®¢æˆ·æ›´å®¹æ˜“ç†è§£â€œæœ€ç•…é”€â€çš„æ¦‚å¿µ", en:"Because customers easily understand the idea of â€œbestsellersâ€", correct:true},
      {zh:"å› ä¸ºå¯ä»¥å‡å°‘é€‰æ‹©é¡¹", en:"Because it limits choices"},
      {zh:"å› ä¸ºè¿™æ ·æ˜¾å¾—åº—é¢è§„æ¨¡å¤§", en:"Because it shows store size"},
      {zh:"å› ä¸ºè¿™æ ·é¿å…ä»‹ç»å…¶ä»–æŸœå°", en:"Because it avoids introducing other counters"}
    ],
    exp_zh:"ç¤¾ä¼šè¯æ˜+æ˜ç¡®æ’åºï¼Œé™ä½é€‰æ‹©æˆæœ¬ï¼Œæå‡ä¿¡å¿ƒã€‚",
    exp_en:"Social proof and clear ranking reduce choice overload and build confidence."
  },
  { zh:"ä¸ºä»€ä¹ˆè¦åœ¨å®¢æˆ·éœ€æ±‚å‡ºç°ä¹‹å‰ï¼Œä¸»åŠ¨å¼•å¯¼ä»–ä»¬ï¼Ÿ",
    en:"Why should salespeople guide customers before their needs are clearly stated?",
    options:[
      {zh:"å› ä¸ºå®¢æˆ·å¸¸å¸¸ä¸è¡¨è¾¾çœŸå®éœ€æ±‚", en:"Because customers often donâ€™t express real needs", correct:true},
      {zh:"å› ä¸ºè¿™æ ·èƒ½å‡å°‘é”€å”®å‘˜å·¥ä½œ", en:"Because it reduces workload"},
      {zh:"å› ä¸ºå®¢æˆ·å–œæ¬¢è¢«ç›´æ¥æ¨é”€", en:"Because customers like direct selling"},
      {zh:"å› ä¸ºè¿™æ ·é¿å…å®¢æˆ·æ¯”è¾ƒä»·æ ¼", en:"Because it avoids price comparison"}
    ],
    exp_zh:"ç”¨ç»“æ„åŒ–è·¯å¾„å¸®åŠ©å®¢æˆ·ä»æ¨¡ç³Šåˆ°æ¸…æ™°ï¼Œé™ä½å†³ç­–ç„¦è™‘ã€‚",
    exp_en:"Structured guidance helps customers move from fuzzy to clear with less anxiety."
  },
  { zh:"å½“å®¢æˆ·è¯´â€œä¸äº†è§£å“ç‰Œâ€æ—¶ï¼Œé”€å”®å‘˜åº”è¯¥å¦‚ä½•å›åº”ï¼Ÿ",
    en:"How should a salesperson respond if a customer says they donâ€™t know the brand?",
    options:[
      {zh:"åœæ­¢è®²è§£ï¼Œè½¬åˆ°ä»·æ ¼", en:"Stop talking and switch to pricing"},
      {zh:"ä¸»åŠ¨ä»‹ç»å“ç‰Œä¼˜åŠ¿å’Œå†å²", en:"Actively introduce brand strengths and history", correct:true},
      {zh:"é©¬ä¸Šæä¾›æŠ˜æ‰£", en:"Offer discounts immediately"},
      {zh:"é¿å…ç»§ç»­å¯¹è¯", en:"Avoid further conversation"}
    ],
    exp_zh:"å…ˆè¡¥é½è®¤çŸ¥åŸºç¡€ï¼Œå†è¿›è¡Œæ–¹æ¡ˆä¸é€‰æ‹©çš„è®¨è®ºã€‚",
    exp_en:"First bridge knowledge gaps, then discuss solutions and choices."
  },
  { zh:"â€œç§è‰â€çš„é€»è¾‘å…³é”®åœ¨äºä»€ä¹ˆï¼Ÿ",
    en:"What is the key logic behind â€œseedingâ€ products?",
    options:[
      {zh:"é€šè¿‡åå¤å¼ºè°ƒï¼Œè®©å®¢æˆ·æ½œæ„è¯†å½¢æˆå…´è¶£", en:"Repeated emphasis to create subconscious interest", correct:true},
      {zh:"ç»™å®¢æˆ·åˆ¶é€ è´­ä¹°å‹åŠ›", en:"Creating buying pressure for the customer"},
      {zh:"å¼ºè°ƒåº“å­˜ç´§å¼ ", en:"Stressing limited stock"},
      {zh:"åªåœ¨å®¢æˆ·ç¦»å¼€å‰ä½¿ç”¨", en:"Only using it before customers leave"}
    ],
    exp_zh:"â€œçœ‹è§â€”è®°ä½â€”å–œæ¬¢â€çš„å±‚å±‚é€’è¿›ï¼Œè€Œéå¼ºå‹æˆäº¤ã€‚",
    exp_en:"From exposure to memory to liking; not about pressure but priming."
  },
  { zh:"åœ¨å®¢æˆ·æµè§ˆæ—¶ï¼Œä¸ºä»€ä¹ˆè¦å¼•å¯¼è€Œä¸æ˜¯è¢«åŠ¨ç­‰å¾…ï¼Ÿ",
    en:"Why should salespeople guide customers instead of waiting passively during browsing?",
    options:[
      {zh:"å› ä¸ºå®¢æˆ·ä¼šè§‰å¾—æ›´æœ‰å®‰å…¨æ„Ÿ", en:"Because customers feel safer"},
      {zh:"å› ä¸ºå¯ä»¥æ§åˆ¶å®¢æˆ·çš„èŠ‚å¥å’Œæ³¨æ„åŠ›", en:"Because it helps control customer pace and focus", correct:true},
      {zh:"å› ä¸ºè¿™æ ·æ˜¾å¾—æ›´æœ‰æ°”åŠ¿", en:"Because it looks more confident"},
      {zh:"å› ä¸ºå®¢æˆ·å–œæ¬¢è¢«è·Ÿéš", en:"Because customers like being followed"}
    ],
    exp_zh:"å¼•å¯¼æ˜¯å¯¹è·¯å¾„ä¸æ³¨æ„åŠ›çš„è®¾è®¡ï¼Œé¿å…æ— æ•ˆæ¸¸é€›ã€‚",
    exp_en:"Guidance designs the path and attention, avoiding meandering."
  },
  { zh:"åœ¨é”€å”®è¿‡ç¨‹ä¸­ï¼Œä¸ºä»€ä¹ˆè¦é¿å…ä¸€æ¬¡æ€§å±•ç¤ºè¿‡å¤šæŸœå°ï¼Ÿ",
    en:"Why should salespeople avoid showing too many counters at once?",
    options:[
      {zh:"å› ä¸ºå®¢æˆ·å®¹æ˜“å¤±å»ç„¦ç‚¹å’Œå…´è¶£", en:"Because customers may lose focus and interest", correct:true},
      {zh:"å› ä¸ºæŸœå°è´§å“ä»·å€¼ä¸ä¸€æ ·", en:"Because products in counters have different values"},
      {zh:"å› ä¸ºè¿™æ ·å‡å°‘å¯¹è¯æ—¶é—´", en:"Because it shortens the conversation"},
      {zh:"å› ä¸ºå®¢æˆ·ä¸å–œæ¬¢é€›åº—", en:"Because customers dislike browsing"}
    ],
    exp_zh:"å‡å°‘é€‰æ‹©è¿‡è½½ï¼Œç»´æŒæ¸…æ™°è·¯å¾„ä¸èŠ‚å¥æ§åˆ¶ã€‚",
    exp_en:"Prevents choice overload and preserves a clear, controlled flow."
  },
  { zh:"â€œé€»è¾‘è¡”æ¥â€åœ¨é”€å”®è¯æœ¯ä¸­æœ€å¤§çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ",
    en:"What is the greatest significance of â€œlogical transitionsâ€ in sales communication?",
    options:[
      {zh:"è®©å®¢æˆ·è§‰å¾—é”€å”®å‘˜ä¸“ä¸šä¸”æœ‰è®¡åˆ’", en:"To make customers feel the salesperson is professional and organized", correct:true},
      {zh:"å¢åŠ ä¸å®¢æˆ·çš„é—²èŠ", en:"To increase small talk with the customer"},
      {zh:"é¿å…å®¢æˆ·æå‡ºå¼‚è®®", en:"To avoid objections from the customer"},
      {zh:"è®©é”€å”®å‘˜è®°å°è¯æ›´å®¹æ˜“", en:"To make scripts easier to memorize"}
    ],
    exp_zh:"è®©è·¯å¾„å¯é¢„æœŸã€ä¿¡æ¯æœ‰åºï¼Œå¢å¼ºä¸“ä¸šå¯ä¿¡åº¦ã€‚",
    exp_en:"Predictable path and ordered info enhance perceived professionalism."
  },
  { zh:"ä¸ºä»€ä¹ˆé—¨åº—è¦å®šæœŸè°ƒæ•´é™ˆåˆ—å¸ƒå±€ï¼Ÿ",
    en:"Why should stores regularly adjust product displays?",
    options:[
      {zh:"å› ä¸ºå®¢æˆ·å¯¹æ–°é™ˆåˆ—æ›´æ•æ„Ÿï¼Œæ›´å®¹æ˜“è¢«å¸å¼•", en:"Because customers are more sensitive to new displays and more likely to be attracted", correct:true},
      {zh:"å› ä¸ºå¯ä»¥å¢åŠ é”€å”®å‘˜çš„å·¥ä½œé‡", en:"Because it increases salespersonâ€™s workload"},
      {zh:"å› ä¸ºè¿™æ ·æ–¹ä¾¿æ¸…ç‚¹åº“å­˜", en:"Because it makes inventory counting easier"},
      {zh:"å› ä¸ºæ‰€æœ‰åº—éƒ½è¿™ä¹ˆåš", en:"Because all stores do it"}
    ],
    exp_zh:"æ–°é²œæ„Ÿæå‡æ³¨æ„åŠ›ä¸åœç•™æ—¶é•¿ï¼Œä¿ƒè¿›è½¬åŒ–ã€‚",
    exp_en:"Novelty captures attention and time on display, aiding conversion."
  }
];

const BANK_ENTRY  = BANK_ALL.slice(0,5);
const BANK_NORMAL = BANK_ALL.slice(0,10);
const BANK_HARD   = BANK_ALL.slice(0,20);

/* ===== çŠ¶æ€ ===== */
let state = { name:"", level:"entry", chosen:[], answers:{}, pos:0 };
const LEVEL_TEXT = {entry:"Entry Â· 5é¢˜", normal:"Normal Â· 10é¢˜", hard:"Hard Â· 20é¢˜"};

/* ===== æœ—è¯»ï¼ˆæ‰‹åŠ¨å¼€å§‹/éšæ—¶åœæ­¢ï¼‰ ===== */
let zhVoice=null, enVoice=null, ttsPlaying=false;
function pickVoices(){
  const v = window.speechSynthesis ? speechSynthesis.getVoices() : [];
  zhVoice = v.find(x=>/zh|cmn|Chinese/i.test(x.lang)) || v.find(x=>/HK|TW/i.test(x.lang)) || null;
  enVoice = v.find(x=>/^en[-_]/i.test(x.lang)) || null;
}
if ('speechSynthesis' in window){
  speechSynthesis.onvoiceschanged = pickVoices;
  pickVoices();
}
function speakOnce(text, voice, rate=1, pitch=1){
  return new Promise(res=>{
    if(!('speechSynthesis' in window)||!text){res();return;}
    const u = new SpeechSynthesisUtterance(text);
    if(voice) u.voice = voice;
    u.rate = rate; u.pitch = pitch;
    u.onend = res; u.onerror = res;
    speechSynthesis.speak(u);
  });
}
async function readCurrentQuestion(){
  if(ttsPlaying) return;
  ttsPlaying = true;
  const q = state.chosen[state.pos];
  try{
    await speakOnce(q.zh, zhVoice, 1.02, 1.0);
    if(!ttsPlaying) return;
    await speakOnce(q.en, enVoice, 1.02, 1.0);
    if(!ttsPlaying) return;
    for(let i=0;i<q.options.length;i++){
      const A = String.fromCharCode(65+i);
      await speakOnce(A + "ï¼Œ" + q.options[i].zh, zhVoice, 1.02, 1.0);
      if(!ttsPlaying) return;
      await speakOnce(A + ". " + q.options[i].en, enVoice, 1.02, 1.0);
      if(!ttsPlaying) return;
    }
  } finally { ttsPlaying = false; }
}
function stopReading(){
  if('speechSynthesis' in window){ try{ speechSynthesis.cancel(); }catch(e){} }
  ttsPlaying = false;
}

/* ===== äº‹ä»¶ç»‘å®š ===== */
$('#btnGoStart').addEventListener('click', ()=>{
  $('#screen-video').style.display='none';
  $('#screen-start').style.display='block';
  window.scrollTo({top:0, behavior:'smooth'});
});
document.querySelectorAll('.seg button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    document.querySelectorAll('.seg button').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    state.level = btn.dataset.level;
  });
});
$('#startBtn').addEventListener('click', ()=>{
  const name = $('#nameInput').value.trim();
  if(!name){
    $('#startBtn').classList.add('danger');
    setTimeout(()=>$('#startBtn').classList.remove('danger'), 600);
    $('#nameInput').focus(); return;
  }
  state.name = name;
  startQuiz();
});
$('#prevBtn').addEventListener('click', ()=>{
  if(state.pos>0){ stopReading(); state.pos--; renderQuestion(); }
});
$('#nextBtn').addEventListener('click', ()=>{
  if(state.pos < state.chosen.length-1){ stopReading(); state.pos++; renderQuestion(); }
  else { stopReading(); finishQuiz(); }
});
$('#againSame').addEventListener('click', ()=>{ stopReading(); startQuiz(); });
$('#againStart').addEventListener('click', ()=>{
  stopReading();
  $('#screen-quiz').style.display='none';
  $('#screen-result').style.display='none';
  $('#screen-start').style.display='block';
  window.scrollTo({top:0, behavior:'smooth'});
});
$('#copyKey').addEventListener('click', ()=>{
  const text = buildStudyKey(state.chosen);
  navigator.clipboard?.writeText(text).then(()=>{
    alert('å·²å¤åˆ¶å­¦ä¹ ç‰ˆç­”æ¡ˆï¼ˆä¸­è‹±+è§£æï¼‰ã€‚Copied study key.');
  }).catch(()=>{
    const ta = document.createElement('textarea'); ta.value=text; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy'); document.body.removeChild(ta);
    alert('å·²å¤åˆ¶å­¦ä¹ ç‰ˆç­”æ¡ˆï¼ˆä¸­è‹±+è§£æï¼‰ã€‚Copied study key.');
  });
});
$('#btnRead').addEventListener('click', readCurrentQuestion);
$('#btnStop').addEventListener('click', stopReading);

/* ===== æµç¨‹ ===== */
const getBank = lvl => lvl==='entry'?BANK_ENTRY : (lvl==='normal'?BANK_NORMAL:BANK_HARD);

function startQuiz(){
  const base = getBank(state.level);
  state.chosen = shuffle(base).map(q=>{
    const opts = shuffle(q.options.map(o=>({...o})));
    const correctIndex = opts.findIndex(o=>o.correct===true);
    return { zh:q.zh, en:q.en, options:opts, correctIndex, exp_zh:q.exp_zh, exp_en:q.exp_en };
  });
  state.answers = {};
  state.pos = 0;

  $('#screen-start').style.display='none';
  $('#screen-result').style.display='none';
  $('#screen-quiz').style.display='block';
  $('#pillName').textContent = `å§“åï¼š${state.name}`;
  $('#pillLevel').textContent = `éš¾åº¦ï¼š${LEVEL_TEXT[state.level]}`;
  renderQuestion();
}

function renderQuestion(){
  const q = state.chosen[state.pos];
  $('#qTitle').textContent = q.zh;
  $('#qSub').textContent   = q.en;

  const optBox = $('#optBox');
  optBox.innerHTML='';
  q.options.forEach((opt, idx)=>{
    const id = `q${state.pos}_opt${idx}`;
    const checked = state.answers[state.pos] === idx;
    const row = el('label', {class:'opt', for:id}, [
      el('input', {type:'radio', name:'opt', id, 'data-idx':idx, checked: checked? 'checked': null}),
      el('div', {class:'opt-label', html:`<strong>${String.fromCharCode(65+idx)}.</strong> ${opt.zh}<br>${opt.en}`})
    ]);
    optBox.appendChild(row);
  });
  optBox.querySelectorAll('input[type=radio]').forEach(r=>{
    r.addEventListener('change', ()=>{
      state.answers[state.pos] = parseInt(r.dataset.idx,10);
      $('#nextBtn').disabled = false;
    });
  });

  $('#nextBtn').disabled = (state.answers[state.pos] == null);
  $('#nextBtn').textContent = (state.pos === state.chosen.length-1) ? 'æäº¤ / Submit' : 'ä¸‹ä¸€é¢˜ / Next';
  $('#prevBtn').disabled = (state.pos === 0);

  $('#pillCount').textContent = `é¢˜ç›®ï¼š${state.pos+1}/${state.chosen.length}`;
  const pct = Math.round((state.pos)/Math.max(1,(state.chosen.length-1))*100);
  $('#progressBar').style.width = `${pct}%`;
}

function finishQuiz(){
  let correct = 0;
  const rows = [];
  state.chosen.forEach((q, i)=>{
    const chosenIdx = state.answers[i];
    const ok = (chosenIdx === q.correctIndex);
    if(ok) correct++;
    rows.push({
      no:i+1,
      zh:q.zh, en:q.en,
      your: chosenIdx!=null ? `${String.fromCharCode(65+chosenIdx)}. ${q.options[chosenIdx].zh}<br>${q.options[chosenIdx].en}` : '<span class="bad">æœªä½œç­” / No answer</span>',
      corr:`${String.fromCharCode(65+q.correctIndex)}. ${q.options[q.correctIndex].zh}<br>${q.options[q.correctIndex].en}`,
      exp:`${q.exp_zh}<br>${q.exp_en}`,
      ok
    });
  });
  const total = state.chosen.length;
  const scorePct = Math.round(correct/total*100);
  const passLine = Math.ceil(total*0.8);
  const pass = correct >= passLine;

  $('#screen-quiz').style.display='none';
  $('#screen-result').style.display='block';
  $('#rName').textContent = `å§“åï¼š${state.name}`;
  $('#rLevel').textContent = `éš¾åº¦ï¼š${LEVEL_TEXT[state.level]}`;
  $('#rScore').textContent = `åˆ†æ•°ï¼š${correct}/${total}ï¼ˆ${scorePct}%ï¼‰`;
  $('#rPass').innerHTML = pass ? `<span class="tag">é€šè¿‡ / PASS</span>` : `<span class="tag" style="border-color:#ffd0d0;background:#fff0f0;color:#bb1e1e">æœªé€šè¿‡ / FAIL</span>`;
  $('#passNote').innerHTML = pass ? `ğŸ‰ æ­å–œé€šè¿‡ï¼Congrats, ${state.name}!`
                                  : `æœ¬æ¬¡æœªé€šè¿‡ã€‚å»ºè®®å¤ä¹ è§£æåé‡æµ‹ã€‚Not passedâ€”review explanations and try again.`;

  const tb = $('#resultTable tbody');
  tb.innerHTML = '';
  rows.forEach(r=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${r.no}</td>
      <td><strong>${r.zh}</strong><br>${r.en}</td>
      <td>${r.your}</td>
      <td>${r.corr}</td>
      <td>${r.exp}</td>
      <td>${r.ok?'<span class="ok">æ­£ç¡®</span>':'<span class="bad">é”™è¯¯</span>'}</td>
    `;
    tb.appendChild(tr);
  });

  window.scrollTo({top:0, behavior:'smooth'});
}

/* å¤åˆ¶å­¦ä¹ ç‰ˆç­”æ¡ˆï¼ˆä¸­è‹±+è§£æï¼‰ */
function buildStudyKey(chosen){
  let out = `ã€å­¦ä¹ ç‰ˆç­”æ¡ˆ Study Keyã€‘\nå§“å Name: ${state.name}\néš¾åº¦ Level: ${LEVEL_TEXT[state.level]}\n\n`;
  chosen.forEach((q,i)=>{
    const cor = q.options[q.correctIndex];
    out += `Q${i+1}. ${q.zh}\n   ${q.en}\n> æ­£ç¡® Correct: ${cor.zh} | ${cor.en}\n> è§£æ Explain: ${q.exp_zh} | ${q.exp_en}\n\n`;
  });
  return out;
}
</script>
</body>
</html>
